Logs b2b:
11:18:01.922 Running build in Washington, D.C., USA (East) â€“ iad1
11:18:01.922 Build machine configuration: 2 cores, 8 GB
11:18:01.937 Cloning github.com/Daniel-Elec2live/sistema-stock (Branch: main, Commit: 1611b59)
11:18:02.300 Cloning completed: 362.000ms
11:18:02.398 Found .vercelignore (repository root)
11:18:02.412 Removed 22 ignored files defined in .vercelignore
11:18:02.412   /.env.example
11:18:02.413   /apps/b2b/.env.example
11:18:02.413   /apps/b2b/.env.local
11:18:02.413   /apps/backoffice/.env.local
11:18:02.413   /database/price-system-migration.sql
11:18:02.413   /services/ocr/.env.example
11:18:02.413   /services/ocr/deploy-hetzner.sh
11:18:02.413   /services/ocr/docker-compose.prod.yml
11:18:02.413   /services/ocr/docker-compose.yml
11:18:02.413   /services/ocr/Dockerfile
11:18:03.841 Restored build cache from previous deployment (8sPyinLSUdM3Lvp69hXY8fVda75N)
11:18:04.463 Running "vercel build"
11:18:04.882 Vercel CLI 48.1.6
11:18:05.256 Warning: Detected "engines": { "node": ">=18.0.0" } in your `package.json` that will automatically upgrade when a new major Node.js Version is released. Learn More: http://vercel.link/node-version
11:18:05.267 Running "install" command: `npm ci`...
11:18:12.697 npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
11:18:13.367 npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
11:18:13.546 npm warn deprecated glob@7.1.7: Glob versions prior to v9 are no longer supported
11:18:13.893 npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
11:18:14.181 npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
11:18:14.991 npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
11:18:15.105 npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
11:18:18.509 npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
11:18:30.125 
11:18:30.125 added 628 packages, and audited 630 packages in 25s
11:18:30.126 
11:18:30.126 187 packages are looking for funding
11:18:30.126   run `npm fund` for details
11:18:30.146 
11:18:30.147 4 moderate severity vulnerabilities
11:18:30.147 
11:18:30.147 To address all issues (including breaking changes), run:
11:18:30.147   npm audit fix --force
11:18:30.148 
11:18:30.148 Run `npm audit` for details.
11:18:30.245 Detected Next.js version: 15.5.2
11:18:30.246 Running "npm run build"
11:18:30.375 
11:18:30.376 > @apps/b2b@1.0.0 build
11:18:30.376 > next build
11:18:30.377 
11:18:31.399    â–² Next.js 15.5.2
11:18:31.400 
11:18:31.486    Creating an optimized production build ...
11:18:37.528  âœ“ Compiled successfully in 5.7s
11:18:37.535    Linting and checking validity of types ...
11:18:44.826 
11:18:44.826 ./app/(tienda)/carrito/page.tsx
11:18:44.826 3:20  Warning: 'useEffect' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.826 
11:18:44.826 ./app/(tienda)/pedidos/[id]/page.tsx
11:18:44.827 29:3  Warning: 'MoreVertical' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 
11:18:44.827 ./app/(tienda)/producto/[id]/page.tsx
11:18:44.827 21:3  Warning: 'Calendar' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 42:9  Warning: 'formatDate' is assigned a value but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 
11:18:44.827 ./components/auth/LoginForm.tsx
11:18:44.827 21:9  Warning: 'router' is assigned a value but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 
11:18:44.827 ./components/tienda/OrderHistory.tsx
11:18:44.827 19:3  Warning: 'MoreVertical' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 30:40  Warning: 'loading' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.827 
11:18:44.828 ./components/ui/toast.tsx
11:18:44.828 49:6  Warning: React Hook useEffect has a missing dependency: 'addToast'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps
11:18:44.828 
11:18:44.828 ./hooks/useAuth.tsx
11:18:44.828 5:20  Warning: 'Customer' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.829 
11:18:44.829 ./hooks/useOrders.ts
11:18:44.829 3:44  Warning: 'useRef' is defined but never used.  @typescript-eslint/no-unused-vars
11:18:44.829 304:6  Warning: React Hook useEffect has a missing dependency: 'order'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps
11:18:44.830 
11:18:44.830 info  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules
11:18:48.979    Collecting page data ...
11:18:51.294    Generating static pages (0/17) ...
11:18:51.977    Generating static pages (4/17) 
11:18:52.252    Generating static pages (8/17) 
11:18:52.354    Generating static pages (12/17) 
11:18:52.355  âœ“ Generating static pages (17/17)
11:18:53.205    Finalizing page optimization ...
11:18:53.205    Collecting build traces ...
11:19:01.478 
11:19:01.481 Route (app)                               Size  First Load JS
11:19:01.482 â”Œ â—‹ /                                    115 B         228 kB
11:19:01.482 â”œ â—‹ /_not-found                          187 B         228 kB
11:19:01.482 â”œ Æ’ /api/auth/login                      113 B         228 kB
11:19:01.482 â”œ Æ’ /api/auth/me                         115 B         228 kB
11:19:01.482 â”œ Æ’ /api/auth/register                   115 B         228 kB
11:19:01.482 â”œ Æ’ /api/orders                          115 B         228 kB
11:19:01.482 â”œ Æ’ /api/orders/[id]                     115 B         228 kB
11:19:01.482 â”œ Æ’ /api/orders/[id]/cancel              115 B         228 kB
11:19:01.483 â”œ Æ’ /api/products/[id]                   115 B         228 kB
11:19:01.483 â”œ Æ’ /api/stock                           115 B         228 kB
11:19:01.483 â”œ Æ’ /api/test-prices                     115 B         228 kB
11:19:01.483 â”œ â—‹ /carrito                           1.88 kB         269 kB
11:19:01.483 â”œ â—‹ /catalogo                           3.2 kB         270 kB
11:19:01.483 â”œ â—‹ /checkout                          4.02 kB         271 kB
11:19:01.483 â”œ Æ’ /confirmacion/[orderId]            2.51 kB         269 kB
11:19:01.483 â”œ â—‹ /login                             1.86 kB         269 kB
11:19:01.483 â”œ â—‹ /pedidos                              4 kB         271 kB
11:19:01.483 â”œ Æ’ /pedidos/[id]                      3.26 kB         270 kB
11:19:01.483 â”œ Æ’ /producto/[id]                     2.68 kB         269 kB
11:19:01.484 â”” â—‹ /register                          2.41 kB         269 kB
11:19:01.484 + First Load JS shared by all           228 kB
11:19:01.484   â”œ chunks/common-7ce15867e008a523.js    23 kB
11:19:01.484   â”” chunks/vendor-2aa23bb9ff7d56be.js   202 kB
11:19:01.484   â”” other shared chunks (total)        2.61 kB
11:19:01.484 
11:19:01.484 
11:19:01.484 â—‹  (Static)   prerendered as static content
11:19:01.484 Æ’  (Dynamic)  server-rendered on demand
11:19:01.484 
11:19:01.666 Traced Next.js server files in: 88.073ms
11:19:01.848 Created all serverless functions in: 181.269ms
11:19:01.866 Collected static files (public/, static/, .next/static): 11.147ms
11:19:01.965 Build Completed in /vercel/output [57s]
11:19:02.148 Deploying outputs...
11:19:12.756 Deployment completed
11:19:13.630 Creating build cache...
11:19:37.877 Created build cache: 24.247s
11:19:37.881 Uploading build cache [192.09 MB]
11:19:40.712 Build cache uploaded: 2.834s


Logs backoffice:
11:19:13.073 Running build in Washington, D.C., USA (East) â€“ iad1
11:19:13.074 Build machine configuration: 2 cores, 8 GB
11:19:13.089 Cloning github.com/Daniel-Elec2live/sistema-stock (Branch: main, Commit: 1611b59)
11:19:13.417 Cloning completed: 328.000ms
11:19:13.532 Found .vercelignore (repository root)
11:19:13.571 Removed 22 ignored files defined in .vercelignore
11:19:13.572   /.env.example
11:19:13.572   /apps/b2b/.env.example
11:19:13.572   /apps/b2b/.env.local
11:19:13.572   /apps/backoffice/.env.local
11:19:13.572   /database/price-system-migration.sql
11:19:13.572   /services/ocr/.env.example
11:19:13.572   /services/ocr/deploy-hetzner.sh
11:19:13.572   /services/ocr/docker-compose.prod.yml
11:19:13.572   /services/ocr/docker-compose.yml
11:19:13.572   /services/ocr/Dockerfile
11:19:14.454 Restored build cache from previous deployment (6RLg9JyYta4eSUCQY3GqG6nu6wuu)
11:19:14.928 Running "vercel build"
11:19:15.315 Vercel CLI 48.1.6
11:19:15.641 Warning: Detected "engines": { "node": ">=18.0.0" } in your `package.json` that will automatically upgrade when a new major Node.js Version is released. Learn More: http://vercel.link/node-version
11:19:15.651 Running "install" command: `npm ci`...
11:19:22.032 npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
11:19:22.619 npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
11:19:22.911 npm warn deprecated glob@7.1.7: Glob versions prior to v9 are no longer supported
11:19:23.209 npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
11:19:23.534 npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
11:19:24.335 npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
11:19:24.336 npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
11:19:27.072 npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
11:19:32.590 
11:19:32.591 added 584 packages, and audited 586 packages in 17s
11:19:32.591 
11:19:32.592 174 packages are looking for funding
11:19:32.592   run `npm fund` for details
11:19:32.610 
11:19:32.610 4 moderate severity vulnerabilities
11:19:32.610 
11:19:32.610 To address all issues (including breaking changes), run:
11:19:32.611   npm audit fix --force
11:19:32.611 
11:19:32.611 Run `npm audit` for details.
11:19:32.676 Detected Next.js version: 14.2.33
11:19:32.677 Running "npm run build"
11:19:32.809 
11:19:32.810 > @sistema-stock/backoffice@0.1.0 build
11:19:32.810 > next build
11:19:32.810 
11:19:33.429   â–² Next.js 14.2.33
11:19:33.429 
11:19:33.499    Creating an optimized production build ...
11:19:55.874  âœ“ Compiled successfully
11:19:55.875    Linting and checking validity of types ...
11:20:05.847    Collecting page data ...
11:20:06.722    Generating static pages (0/23) ...
11:20:07.855    Generating static pages (5/23) 
11:20:08.389    Generating static pages (11/23) 
11:20:08.769 ğŸ” COMPARISON API - Starting comparison
11:20:09.254 ğŸ“Š CLIENT 1 Results: [
11:20:09.255   {
11:20:09.255     id: '5c5d7eb1',
11:20:09.255     status: 'pending',
11:20:09.255     updated_at: '2025-09-29T08:37:14.212246+00:00'
11:20:09.255   },
11:20:09.255   {
11:20:09.255     id: '50601c1c',
11:20:09.255     status: 'pending',
11:20:09.255     updated_at: '2025-09-28T13:53:27.196653+00:00'
11:20:09.255   },
11:20:09.255   {
11:20:09.255     id: '2f97bff3',
11:20:09.255     status: 'delivered',
11:20:09.255     updated_at: '2025-09-19T08:36:46.121669+00:00'
11:20:09.255   },
11:20:09.255   {
11:20:09.255     id: '34f2d249',
11:20:09.255     status: 'prepared',
11:20:09.255     updated_at: '2025-09-19T08:12:54.700798+00:00'
11:20:09.255   },
11:20:09.255   {
11:20:09.255     id: '153606e2',
11:20:09.255     status: 'delivered',
11:20:09.255     updated_at: '2025-09-19T08:08:19.098769+00:00'
11:20:09.256   }
11:20:09.256 ]
11:20:09.256 ğŸ“Š CLIENT 2 Results: [
11:20:09.256   {
11:20:09.256     id: '5c5d7eb1',
11:20:09.256     status: 'pending',
11:20:09.256     updated_at: '2025-09-29T08:37:14.212246+00:00'
11:20:09.256   },
11:20:09.256   {
11:20:09.256     id: '50601c1c',
11:20:09.256     status: 'pending',
11:20:09.256     updated_at: '2025-09-28T13:53:27.196653+00:00'
11:20:09.256   },
11:20:09.256   {
11:20:09.256     id: '2f97bff3',
11:20:09.256     status: 'delivered',
11:20:09.257     updated_at: '2025-09-19T08:36:46.121669+00:00'
11:20:09.257   },
11:20:09.257   {
11:20:09.257     id: '34f2d249',
11:20:09.257     status: 'prepared',
11:20:09.257     updated_at: '2025-09-19T08:12:54.700798+00:00'
11:20:09.257   },
11:20:09.257   {
11:20:09.257     id: '153606e2',
11:20:09.257     status: 'delivered',
11:20:09.257     updated_at: '2025-09-19T08:08:19.098769+00:00'
11:20:09.257   }
11:20:09.257 ]
11:20:09.362 ğŸ“‹ SPECIFIC ORDER Test: {
11:20:09.363   id: '153606e2',
11:20:09.363   status: 'delivered',
11:20:09.364   updated_at: '2025-09-19T08:08:19.098769+00:00'
11:20:09.364 }
11:20:09.471 ğŸ“‹ RAW QUERY Result: null
11:20:09.476    Generating static pages (17/23) 
11:20:10.338 ğŸ” DIRECT DB DEBUG - Connecting to database
11:20:10.715 âš ï¸ RPC no disponible, usando query directa
11:20:10.716 ğŸ“Š DB Debug Results: {
11:20:10.716   directQuery: 6,
11:20:10.716   freshQuery: 6,
11:20:10.716   errors: { directError: null, freshError: null }
11:20:10.716 }
11:20:10.728 ğŸ” Backoffice API - Fetching all orders [1759137610717]
11:20:10.728 ğŸ”§ Environment check: {
11:20:10.728   supabaseUrl: 'https://rnnkgzbhgonmdxtirwhg.s...',
11:20:10.728   hasServiceKey: true,
11:20:10.729   timestamp: 1759137610717
11:20:10.729 }
11:20:10.885 ğŸ“Š Raw orders from DB: { count: 6, error: null }
11:20:10.987 ğŸ“‹ Order 50601c1c: customer=Daniel Vega Hurtado, status=pending
11:20:10.988 ğŸ“‹ Order 2f97bff3: customer=Daniel Vega Hurtado, status=delivered
11:20:10.988 ğŸ“‹ Order 34f2d249: customer=Daniel Vega Hurtado, status=prepared
11:20:10.990 ğŸ“‹ Order 153606e2: customer=Daniel Vega Hurtado, status=delivered
11:20:10.993 ğŸ“‹ Order 0915eecc: customer=Daniel Vega Hurtado, status=cancelled
11:20:10.994 ğŸ“‹ Order 5c5d7eb1: customer=Daniel Vega Hurtado, status=pending
11:20:10.994 âœ… Successfully fetched 6 orders
11:20:10.994 ğŸ“Š Sample orders with statuses: [
11:20:10.994   {
11:20:10.995     id: '5c5d7eb1',
11:20:10.995     status: 'pending',
11:20:10.995     customer: 'Daniel Vega Hurtado'
11:20:10.995   },
11:20:10.996   {
11:20:10.996     id: '50601c1c',
11:20:10.996     status: 'pending',
11:20:10.996     customer: 'Daniel Vega Hurtado'
11:20:10.997   },
11:20:10.997   {
11:20:10.997     id: '2f97bff3',
11:20:10.997     status: 'delivered',
11:20:10.997     customer: 'Daniel Vega Hurtado'
11:20:10.997   }
11:20:10.997 ]
11:20:11.134 ğŸ”§ Testing Supabase connection...
11:20:11.240 ğŸ“Š Found 6 orders in database
11:20:11.543 ğŸ“‹ Sample orders with detailed status info:
11:20:11.543   - ID: 5c5d7eb1, Status: "pending", Created: 2025-09-29T08:37:14.212246+00:00, Updated: 2025-09-29T08:37:14.212246+00:00
11:20:11.544   - ID: 50601c1c, Status: "pending", Created: 2025-09-28T13:53:27.196653+00:00, Updated: 2025-09-28T13:53:27.196653+00:00
11:20:11.544   - ID: 34f2d249, Status: "prepared", Created: 2025-09-18T08:47:58.860284+00:00, Updated: 2025-09-19T08:12:54.700798+00:00
11:20:11.544   - ID: 2f97bff3, Status: "delivered", Created: 2025-09-18T08:33:23.995782+00:00, Updated: 2025-09-19T08:36:46.121669+00:00
11:20:11.544   - ID: 153606e2, Status: "delivered", Created: 2025-09-18T08:24:35.151916+00:00, Updated: 2025-09-19T08:08:19.098769+00:00
11:20:11.545   - ID: 0915eecc, Status: "cancelled", Created: 2025-09-17T09:48:54.707444+00:00, Updated: 2025-09-18T08:32:25.94726+00:00
11:20:11.549  âœ“ Generating static pages (23/23)
11:20:11.718    Finalizing page optimization ...
11:20:11.718    Collecting build traces ...
11:20:14.063 
11:20:14.077 Route (app)                              Size     First Load JS
11:20:14.078 â”Œ â—‹ /                                    3.67 kB         107 kB
11:20:14.078 â”œ â—‹ /_not-found                          138 B          87.4 kB
11:20:14.079 â”œ â—‹ /ajustes                             5.07 kB         121 kB
11:20:14.079 â”œ â—‹ /alertas                             3.66 kB        98.3 kB
11:20:14.079 â”œ Æ’ /api/alerts                          0 B                0 B
11:20:14.079 â”œ â—‹ /api/compare-orders                  0 B                0 B
11:20:14.079 â”œ Æ’ /api/customers                       0 B                0 B
11:20:14.079 â”œ Æ’ /api/customers/[id]/approve          0 B                0 B
11:20:14.083 â”œ Æ’ /api/customers/[id]/discounts        0 B                0 B
11:20:14.083 â”œ â—‹ /api/dashboard/alerts                0 B                0 B
11:20:14.084 â”œ â—‹ /api/dashboard/kpis                  0 B                0 B
11:20:14.084 â”œ â—‹ /api/debug-db                        0 B                0 B
11:20:14.084 â”œ Æ’ /api/debug-order/[id]                0 B                0 B
11:20:14.084 â”œ Æ’ /api/discounts/[id]                  0 B                0 B
11:20:14.084 â”œ Æ’ /api/entries                         0 B                0 B
11:20:14.084 â”œ Æ’ /api/ocr/callback                    0 B                0 B
11:20:14.084 â”œ â—‹ /api/orders                          0 B                0 B
11:20:14.084 â”œ Æ’ /api/orders/[id]/details             0 B                0 B
11:20:14.084 â”œ Æ’ /api/orders/[id]/status              0 B                0 B
11:20:14.084 â”œ Æ’ /api/productos                       0 B                0 B
11:20:14.084 â”œ Æ’ /api/products                        0 B                0 B
11:20:14.084 â”œ Æ’ /api/products/[id]                   0 B                0 B
11:20:14.085 â”œ Æ’ /api/products/[id]/historial         0 B                0 B
11:20:14.085 â”œ Æ’ /api/products/generate-reference     0 B                0 B
11:20:14.085 â”œ â—‹ /api/proveedores                     0 B                0 B
11:20:14.085 â”œ Æ’ /api/stock/adjustment                0 B                0 B
11:20:14.085 â”œ Æ’ /api/stock/adjustments               0 B                0 B
11:20:14.085 â”œ â—‹ /api/test-orders                     0 B                0 B
11:20:14.085 â”œ Æ’ /api/upload                          0 B                0 B
11:20:14.085 â”œ â—‹ /clientes                            4.49 kB         108 kB
11:20:14.085 â”œ Æ’ /clientes/[id]/descuentos            5.27 kB         109 kB
11:20:14.086 â”œ â—‹ /entradas                            5.93 kB         109 kB
11:20:14.086 â”œ â—‹ /entradas/manual                     4.03 kB         129 kB
11:20:14.086 â”œ â—‹ /pedidos                             30.7 kB         125 kB
11:20:14.086 â”œ Æ’ /pedidos/[id]                        5.42 kB         100 kB
11:20:14.086 â”œ â—‹ /productos                           6.99 kB         132 kB
11:20:14.086 â”œ Æ’ /productos/[id]                      3.53 kB         107 kB
11:20:14.087 â”œ Æ’ /productos/[id]/editar               1.3 kB          130 kB
11:20:14.087 â”” â—‹ /productos/nuevo                     816 B           130 kB
11:20:14.087 + First Load JS shared by all            87.2 kB
11:20:14.087   â”œ chunks/1dd3208c-15a7011b3f148ab1.js  53.6 kB
11:20:14.087   â”œ chunks/528-aeef1ab259f29ee9.js       31.7 kB
11:20:14.087   â”” other shared chunks (total)          1.9 kB
11:20:14.087 
11:20:14.087 
11:20:14.087 Æ’ Middleware                             26.6 kB
11:20:14.088 
11:20:14.090 â—‹  (Static)   prerendered as static content
11:20:14.090 Æ’  (Dynamic)  server-rendered on demand
11:20:14.090 
11:20:14.216 Traced Next.js server files in: 33.244ms
11:20:14.543 Created all serverless functions in: 326.828ms
11:20:14.597 Collected static files (public/, static/, .next/static): 6.968ms
11:20:14.721 Build Completed in /vercel/output [59s]
11:20:14.912 Deploying outputs...
11:20:26.917 Deployment completed
11:20:27.814 Creating build cache...
11:20:45.183 Created build cache: 17.363s
11:20:45.183 Uploading build cache [160.61 MB]
11:20:47.003 Build cache uploaded: 1.824s